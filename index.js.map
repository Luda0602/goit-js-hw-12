{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49186769-dabefba962826c776b77806d1';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet PER_PAGE = 15;\nlet page = 1;\n\n// Функція для отримання зображень\nexport async function searchImages(query) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: PER_PAGE,\n                page: page,\n            },\n        });\n\n        page += 1;\n        \n        // Повертаємо масив зображень + загальну кількість результатів\n        return { images: response.data.hits, totalHits: response.data.totalHits };\n\n    } catch (error) {\n        console.error('Error fetching images:', error.message);\n        return { images: [], totalHits: 0 };\n    }\n}\n\n// Скидання лічильника сторінок\nexport function resetPage() {\n    page = 1;\n}","// Функції інтерфейсу\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Ініціалізація SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n\n// Функція для створення карток зображень\nexport function createImageMarkup(images) {\n  return images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"thumb-block\">\n          <div class=\"block\"><h2 class=\"tittle\">Likes</h2><p class=\"amount\">${likes}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Views</h2><p class=\"amount\">${views}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Comments</h2><p class=\"amount\">${comments}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Downloads</h2><p class=\"amount\">${downloads}</p></div>\n        </div>\n      </li>`).join('');\n}\n\n// Функція для оновлення галереї\nexport function updateGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  gallery.insertAdjacentHTML('beforeend', createImageMarkup(images));\n  lightbox.refresh(); // Оновлюємо SimpleLightbox після додавання нових зображень\n  smoothScroll(); // додаємо скролл\n}\n\nexport function showNoResultsMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}\n\nexport function smoothScroll() {\n  const firstCard = document.querySelector('.gallery-item'); \n\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height; \n\n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: \"smooth\",\n    });\n  }\n}","import { searchImages, resetPage } from './js/pixabay-api.js';\nimport { updateGallery, showNoResultsMessage } from './js/render-functions.js';\nimport { smoothScroll } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.input-search');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loaderMore = document.querySelector('.loader-load');\nconst btnLoad = document.querySelector('.btn-load');\n\nloader.style.display = 'none';\nbtnLoad.style.display = 'none';\nloaderMore.style.display = 'none'; \n\nlet currentQuery = ''; \nlet totalHits = 0; \nlet imagesLoaded = 0; \n\nform.addEventListener('submit', function (event) {\n    event.preventDefault();\n\n    const query = input.value.trim();\n    \n    if (query === '') {\n        showNoResultsMessage('Please enter a search query!');\n        return;\n    }\n\n    resetPage();\n    gallery.innerHTML = ''; \n    btnLoad.style.display = 'none';\n    loader.style.display = 'block'; \n\n    currentQuery = query;\n    \n    searchImages(currentQuery)\n        .then(({ images, totalHits: hits }) => {\n            loader.style.display = 'none'; \n            \n            if (images.length === 0) { \n                showNoResultsMessage('Sorry, there are no images matching your search query. Please try again!');\n                return;\n            }\n\n            totalHits = hits; \n            imagesLoaded = images.length; \n\n            updateGallery(images);\n\n            if (imagesLoaded < totalHits) {\n                btnLoad.style.display = 'block';\n            } else {\n              btnLoad.style.display = 'none'; // Якщо тільки 1 фото, ховаємо кнопку\n             showNoResultsMessage(\"We're sorry, but you've reached the end of search results.\");\n            }\n        })\n        .catch(error => {\n            loader.style.display = 'none';\n            showNoResultsMessage('Error fetching images. Please try again!');\n            console.error('Помилка сервера:', error.message);\n        });\n\n    form.reset();\n});\n\n// Завантаження додаткових фото\nbtnLoad.addEventListener('click', async () => {\n    if (currentQuery === '') return;\n\n    loaderMore.style.display = 'block'; \n    btnLoad.style.display = 'none';\n\n    await searchImages(currentQuery)\n        .then(({ images }) => {\n            loaderMore.style.display = 'none';\n\n            if (images.length === 0) {\n                showNoResultsMessage(\"We're sorry, but you've reached the end of search results.\");\n                return;\n            }\n\n            updateGallery(images);\n            smoothScroll();\n\n            imagesLoaded += images.length; \n            \n            if (imagesLoaded >= totalHits) {\n              btnLoad.style.display = 'none';\n               showNoResultsMessage(\"We're sorry, but you've reached the end of search results.\");\n            } else {\n                btnLoad.style.display = 'block';\n            }\n        })\n        .catch(error => {\n            loaderMore.style.display = 'none'; \n            showNoResultsMessage('Error loading more images.');\n            console.error('Помилка сервера:', error.message);\n        });\n});"],"names":["API_KEY","BASE_URL","PER_PAGE","page","searchImages","query","response","axios","error","resetPage","lightbox","SimpleLightbox","createImageMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","updateGallery","smoothScroll","showNoResultsMessage","message","iziToast","firstCard","cardHeight","form","input","gallery","loader","loaderMore","btnLoad","currentQuery","totalHits","imagesLoaded","event","hits"],"mappings":"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"}